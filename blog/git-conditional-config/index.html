<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1,user-scalable=no" name=viewport><meta content="index, follow" name=robots><meta content=@confusedalex@indieweb.social name=fediverse:creator><link href=https://indieauth.com/auth rel=authorization_endpoint><link href=https://tokens.indieauth.com/token rel=token_endpoint><link href=https://webmention.io/confusedalex.dev/webmention rel=webmention><link href=https://webmention.io/confusedalex.dev/xmlrpc rel=pingback><title>TIL: git conditional config with and without home-manager</title><meta content="TIL: git conditional config with and without home-manager" name=title><meta content=confusedalex name=author><meta content=website property=og:type><meta content=https://confusedalex.dev/blog/git-conditional-config/ property=og:url><meta content=confusedalex property=og:site_name><meta content="TIL: git conditional config with and without home-manager" property=og:title><meta content=https://confusedalex.dev/icon.png property=og:image><meta content=summary_large_image property=twitter:card><meta content=https://confusedalex.dev/blog/git-conditional-config/ property=twitter:url><meta content="TIL: git conditional config with and without home-manager" property=twitter:title><meta content=https://confusedalex.dev/icon.png property=twitter:image><link href=https://confusedalex.dev/blog/git-conditional-config/ rel=canonical><link rel="shortcut icon" href=https://confusedalex.dev/favicon.ico type=image/x-icon><link href="https://confusedalex.dev/ atom.xml" rel=alternate title=RSS type=application/atom+xml><link href=/css/reset.css rel=stylesheet><link href=/css/suCSS.css rel=stylesheet><link href=https://confusedalex.dev/css/style.css rel=stylesheet><script defer src=https://confusedalex.dev/js/script.js></script><script data-website-id=7282c6fc-1b4a-4c34-80a0-af8d70c64587 defer src=https://stats.confusedalex.dev/script.js></script><body><header><nav id=nav-bar><a href=/> /home/ </a><a href=/blog> /blog/ </a><a href=/atom.xml> /rss/ </a></nav></header><main><article class=h-entry><div><a href=..>..</a>/<span class=accent-data><a class=u-url href=https://confusedalex.dev/blog/git-conditional-config/>git-conditional-config</a></span></div><time class=dt-published datetime=2025-02-19>Published on: <span class=accent-data>2025-02-19</span></time><address rel=author>By <span class=accent-data><a class="p-author h-card" href=https://confusedalex.dev>confusedalex</a></span></address><h1 class=p-name>TIL: git conditional config with and without home-manager</h1><div class=e-content><p>Today I learnt how to use git conditional config to use multiple identities easily.<br> I use git for my private project and the projects I need to work at my day job.<br> To keep these two projects apart, I have a <code>~/projects</code> folder in my home directory with the two subfolder <code>~/projects/work</code> and <code>~/projects/personal</code>. Now we can tell git to always use the one identity for all projects under <code>~/projects/personal</code> and another for <code>~/projects/work</code>. We just add two includeIfs in our git config. With includeIf we can specify other files to source if the condition is met. The prepended “gitdir:” just means every git repository under this directory. <sup class=footnote-reference id=fr-1-1><a href=#fn-1>[1]</a></sup><pre style=color:#fdf4c1aa;background-color:#282828><code><span>[includeIf "gitdir:~/projects/personal/"]
</span><span>	path = "./personal"
</span><span>
</span><span>[includeIf "gitdir:~/projects/work/"]
</span><span>	path = "./work"
</span></code></pre><p>In the personal config, we specify our personal identity<pre style=color:#fdf4c1aa;background-color:#282828><code><span>[user]
</span><span>	email = "alex@confusedalex.dev"
</span><span>	name = "confusedalex"
</span><span>	signingKey = "05AF71643F6E2ED3"
</span></code></pre><p>and do the same for the work config.<h2 id=integrating-with-home-manager>Integrating with home-manager</h2><p>Because I use <a href=https://nix-community.github.io/home-manager/index.xhtml rel=noopener target=_blank>home-manager</a> I want to specify these conditionals with nix. We just need to add a list we attributes sets for every include.<blockquote><p>Everything under contents must follow the structure as in git-config.</blockquote><pre class=language-nix data-lang=nix style=color:#fdf4c1aa;background-color:#282828><code class=language-nix data-lang=nix><span>{
</span><span>  </span><span style=color:#8ec07c>programs</span><span>.</span><span style=color:#8ec07c>git </span><span style=color:#fe8019>= </span><span>{
</span><span>    </span><span style=color:#8ec07c>enable </span><span style=color:#fe8019>= </span><span style=color:#d3869b>true</span><span>;
</span><span>    </span><span style=color:#928374;font-style:italic># ...
</span><span>    </span><span style=color:#8ec07c>includes </span><span style=color:#fe8019>= </span><span>[
</span><span>      {
</span><span>        </span><span style=color:#8ec07c>condition </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>"gitdir:~/projects/personal/"</span><span>;
</span><span>        </span><span style=color:#8ec07c>contents </span><span style=color:#fe8019>= </span><span>{
</span><span>          </span><span style=color:#8ec07c>user </span><span style=color:#fe8019>= </span><span>{
</span><span>            </span><span style=color:#8ec07c>name </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>"confusedalex"</span><span>;
</span><span>            </span><span style=color:#8ec07c>email </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>"alex@confusedalex.dev"</span><span>;
</span><span>            </span><span style=color:#8ec07c>signingKey </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>"05AF71643F6E2ED3"</span><span>;
</span><span>          };
</span><span>          </span><span style=color:#8ec07c>gpg</span><span>.</span><span style=color:#8ec07c>format </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>"openpgp"</span><span>;
</span><span>        };
</span><span>      }
</span><span>      {
</span><span>        </span><span style=color:#8ec07c>condition </span><span style=color:#fe8019>= </span><span style=color:#b8bb26>"gitdir:~/projects/work/"</span><span>;
</span><span>        </span><span style=color:#8ec07c>contents </span><span style=color:#fe8019>= </span><span>{
</span><span>            </span><span style=color:#928374;font-style:italic>#...
</span><span>        };
</span><span>      }
</span><span>    ];
</span><span>  };
</span><span>}
</span></code></pre><hr><ol class=footnotes-list><li id=fn-1><p><a href=https://git-scm.com/docs/git-config#_includes rel=noopener target=_blank> https://git-scm.com/docs/git-config#_includes </a> <a href=#fr-1-1>↩</a></p></ol></div><p class=tags-data><a href=/tags/til>/til/</a> <a href=/tags/git>/git/</a> <a href=/tags/nix>/nix/</a><hr><section class=box><strong>Reply via email</strong><p>Thoughts, feedback, questions? I would like to hear about them! Just drop me an email at <a href=mailto:hello@confusedalex.dev> hello[at]confusedalex.dev</a></section><br><section class=box><h2>Webmentions</h2><div><span>Discuss this post on </span><a class="capitalize u-syndication" href="https://news.ycombinator.com/item?id=43100630" rel=syndication> hackernews</a>, <a class="capitalize u-syndication" href=https://indieweb.social/@confusedalex/114030084197782234 rel=syndication> mastodon</a></div><div class=webmention><p>No webmentions yet. Be the first to comment, like or repost!</div></section><footer><hr><div id=footer-container></div><div><div class=retro-buttons-container><a href=https://512kb.club><img alt="a proud member of the green team of 512KB club" class=retro-button sizes=88x31 src=https://512kb.club/assets/images/green-team.gif></a><a href=https://neovim.io/><img alt="A button that indicated that this site was edited with VIM" class=retro-button sizes=88x31 src=/buttons/vim-button.gif></a><a href=https://transkidsdeservebetter.org/><img alt="A button that advocates for trans rights" class=retro-button sizes=88x31 src=/buttons/trans-rights-now.gif></a><a href=https://www.gnu.org/software/emacs/><img alt="A button that states, that this website was created with EMACS" class=retro-button sizes=88x31 src=/buttons/created-with-emacs.gif></a><a href=https://confusedalex.dev><img class=retro-button sizes=88x31 src=/buttons/confusedalex.gif></a></div></div></footer>